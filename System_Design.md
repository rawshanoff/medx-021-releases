# üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –ó–∞–¥–∞–Ω–∏–µ MedX

*(–í–µ—Ä—Å–∏—è: –§–∏–Ω–∞–ª—å–Ω–∞—è, –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ–≥–æ –¢–ó)*

## 1. –û–±—â–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è
**MedX** ‚Äî –ª–æ–∫–∞–ª—å–Ω–∞—è (desktop) –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ (FastAPI + React/Electron) —Å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ª–∏—Ü–µ–Ω–∑–∏—è–º–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç.

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
*   **–ï–¥–∏–Ω—ã–π –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤**: –í—Å–µ –∫–ª–∏–Ω–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω `MedX.exe`.
*   **–ö–æ–Ω—Ç—Ä–æ–ª—å —Ñ—É–Ω–∫—Ü–∏–π**: –î–æ—Å—Ç—É–ø –∫ –º–æ–¥—É–ª—è–º (–ö–∞—Å—Å–∞, –û—Ç—á–µ—Ç—ã, –û—á–µ—Ä–µ–¥—å) —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º, –∞ –Ω–µ –≤–µ—Ä—Å–∏–µ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã.
*   **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram**: –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –≤–∫–ª—é—á–∞–µ—Ç/–æ—Ç–∫–ª—é—á–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞–º —á–µ—Ä–µ–∑ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞.

---

## 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –û–±–Ω–æ–≤–ª–µ–Ω–∏–π (Auto-Update)

### 2.1. –û—Ç–∫–∞–∑ –æ—Ç –õ–∞—É–Ω—á–µ—Ä–∞
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å—Ç—Ä–æ–µ–Ω–æ –≤ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
1.  **–§–æ–Ω–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–∑ –≤ —á–∞—Å/—Å—É—Ç–∫–∏ –æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç `update.medx.com/latest`.
2.  **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ**: –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è ‚Üí –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∏–∫–æ–Ω–∫–∞/–±–∞–Ω–Ω–µ—Ä "–î–æ—Å—Ç—É–ø–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ v1.2.0".
3.  **–î–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**:
    *   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–û–±–Ω–æ–≤–∏—Ç—å –∏ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å".
    *   –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–∫–∞—á–∏–≤–∞–µ—Ç –∞—Ä—Ö–∏–≤ –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—É—é –ø–∞–ø–∫—É.
    *   –ó–∞–ø—É—Å–∫–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç `updater.exe` (–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å), –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–º–µ–Ω—è–µ—Ç —Ñ–∞–π–ª—ã –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç MedX.

### 2.2. –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
*   –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `db_version`.
*   –ï—Å–ª–∏ –≤–µ—Ä—Å–∏—è –∫–æ–¥–∞ –Ω–æ–≤–µ–µ –≤–µ—Ä—Å–∏–∏ –ë–î ‚Üí **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π Alembic Upgrade**.
*   **–ü—Ä–∞–≤–∏–ª–æ**: –ú–∏–≥—Ä–∞—Ü–∏–∏ —Ç–æ–ª—å–∫–æ –¥–æ–ø–æ–ª–Ω—è—é—â–∏–µ (–Ω–µ —É–¥–∞–ª—è–µ–º –∫–æ–ª–æ–Ω–∫–∏ —Å—Ä–∞–∑—É), —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–±–æ—è—Ö.

---

## 3. –õ–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ Feature Flags

### 3.1. –ú–æ–¥–µ–ª—å "Feature-Based"
–ù–µ—Ç –∂–µ—Å—Ç–∫–∏—Ö —Ç–∞—Ä–∏—Ñ–æ–≤ "Pro/Gold". –ï—Å—Ç—å –Ω–∞–±–æ—Ä –∞—Ç–æ–º–∞—Ä–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –≤–∫–ª—é—á–∞—é—Ç—Å—è –Ω–∞ –≤—Ä–µ–º—è.

**–°–ø–∏—Å–æ–∫ —Ñ—É–Ω–∫—Ü–∏–π (–ø—Ä–∏–º–µ—Ä):**
*   `core` (–ë–∞–∑–∞: –ø–∞—Ü–∏–µ–Ω—Ç—ã, –∑–∞–ø–∏—Å—å) ‚Äî –æ–±—ã—á–Ω–æ Lifetime.
*   `finance_basic` (–ü—Ä–∏–µ–º –æ–ø–ª–∞—Ç)
*   `finance_pro` (–°–º–µ–Ω—ã, Z-–æ—Ç—á–µ—Ç—ã)
*   `tv_queue` (–í—ã–≤–æ–¥ –Ω–∞ –¢–í)
*   `whatsapp_notify` (–†–∞—Å—Å—ã–ª–∫–∏)

### 3.2. –õ–æ–≥–∏–∫–∞ –ü—Ä–æ–≤–µ—Ä–∫–∏
1.  **–ó–∞–ø—Ä–æ—Å**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —à–ª–µ—Ç `clinic_id` –Ω–∞ –°–µ—Ä–≤–µ—Ä –õ–∏—Ü–µ–Ω–∑–∏–π.
2.  **–û—Ç–≤–µ—Ç –°–µ—Ä–≤–µ—Ä–∞**:
    ```json
    {
      "features": {
        "finance_pro": "2026-12-31T23:59:59",
        "tv_queue": "9999-12-31T23:59:59"
      },
      "signature": "jwt_signed_hash"
    }
    ```
3.  **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –û—Ç–≤–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ.
4.  **–û—Ñ–ª–∞–π–Ω Grace Period**: –ï—Å–ª–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –Ω–µ—Ç, —Ä–∞–±–æ—Ç–∞–µ–º –ø–æ –∫—ç—à—É 3 –¥–Ω—è. –ù–∞ 4-–π –¥–µ–Ω—å –±–ª–æ–∫–∏—Ä—É–µ–º –ø–ª–∞—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏.

### 3.3. UX (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç)
*   –ö–Ω–æ–ø–∫–∏ –ø–ª–∞—Ç–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π **–≤—Å–µ–≥–¥–∞ –≤–∏–¥–Ω—ã**.
*   –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—É—é/–ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é:
    > "–î–æ—Å—Ç—É–ø –∫ –º–æ–¥—É–ª—é '–§–∏–Ω–∞–Ω—Å—ã Pro' –∏—Å—Ç–µ–∫ 01.03.2026. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É."
*   –í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è, –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö (Read-only) –æ—Å—Ç–∞–µ—Ç—Å—è.

---

## 4. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (Back-office)

### 4.1. –°–µ—Ä–≤–µ—Ä –õ–∏—Ü–µ–Ω–∑–∏–π (Python/FastAPI)
*   –õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π API.
*   –•—Ä–∞–Ω–∏—Ç —Ç–∞–±–ª–∏—Ü—É `Licenses`: `clinic_id`, `feature_code`, `valid_until`.

### 4.2. Telegram-–±–æ—Ç –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è (Admin Bot)
–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –í–ª–∞–¥–µ–ª—å—Ü–∞ –ø—Ä–æ–¥—É–∫—Ç–∞ (–í–∞—Å).

**–ö–æ–º–∞–Ω–¥—ã:**
*   `/new_clinic [name]` ‚Üí –°–æ–∑–¥–∞–µ—Ç ID –∫–ª–∏–Ω–∏–∫–∏.
*   `/enable [clinic_id] [feature] [duration]` ‚Üí –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é.
    *   *–ü—Ä–∏–º–µ—Ä*: `/enable medx_01 finance_pro 30d` (–Ω–∞ 30 –¥–Ω–µ–π)
    *   *–ü—Ä–∏–º–µ—Ä*: `/enable medx_01 core lifetime` (–Ω–∞–≤—Å–µ–≥–¥–∞)
*   `/stats` ‚Üí –ö—Ç–æ –∫–æ–≥–¥–∞ –æ–±–Ω–æ–≤–ª—è–ª—Å—è –∏ —É –∫–æ–≥–æ –∫–æ–≥–¥–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç –ª–∏—Ü–µ–Ω–∑–∏—è.

---

## 5. –°—Ç–µ–∫ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–π (–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–π)
*   **Backend**: Python (FastAPI).
*   **Database**: PostgreSQL.
*   **Migration**: Alembic.
*   **Frontend**: React (Vite).
*   **Desktop Wrapper**: Electron –∏–ª–∏ PyWebView (–¥–ª—è —É–ø–∞–∫–æ–≤–∫—É –≤ .exe).
*   **License Server**: Python (–Ω–∞ –≤–∞—à–µ–º —Ö–æ—Å—Ç–∏–Ω–≥–µ).

---

## 6. –ü–ª–∞–Ω –í–Ω–µ–¥—Ä–µ–Ω–∏—è MVP

### –≠—Ç–∞–ø 1: –Ø–¥—Ä–æ (Core)
*   –ë–î + API (–ü–∞—Ü–∏–µ–Ω—Ç—ã, –í—Ä–∞—á–∏).
*   –ë–∞–∑–æ–≤—ã–π UI –†–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

### –≠—Ç–∞–ø 2: –õ–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–∏–µ (License Server)
*   –ü–æ–¥–Ω—è—Ç–∏–µ –ø—Ä–æ—Å—Ç–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞.
*   –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ JWT –≤ –∫–ª–∏–µ–Ω—Ç–µ.
*   –ë–æ—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∞–≤.

### –≠—Ç–∞–ø 3: –û–±–Ω–æ–≤–ª—è—Ç–æ—Ä (Updater)
*   –õ–æ–≥–∏–∫–∞ "–°–∫–∞—á–∞—Ç—å -> –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å -> –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å".

### –≠—Ç–∞–ø 4: –ë–∏–∑–Ω–µ—Å-—Ñ–∏—á–∏
*   –ö–∞—Å—Å–∞, –û—Ç—á–µ—Ç—ã (–ø–æ–¥–∫–ª—é—á–∞–µ–º—ã–µ —á–µ—Ä–µ–∑ —Ñ–ª–∞–≥–∏).
